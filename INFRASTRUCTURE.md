# インフラストラクチャ

## 🖥️ 使用しているサーバー/サービス

### 1. Vercel（フロントエンド + ホスティング）

**役割**: Webアプリケーションのホスティング

- **URL**: https://schedule-app-gold-tau.vercel.app
- **機能**: Next.js アプリケーションのデプロイと実行
- **プラン**: Hobby（無料プラン）
- **制限**: 1日100デプロイ
- **特徴**: 
  - 自動デプロイ（GitHub連携）
  - CDN配信
  - SSL証明書（自動）
  - カスタムドメイン対応

### 2. Supabase（バックエンド + データベース）

**役割**: 認証とデータベース

- **URL**: https://tekzuupjdohbpveearfb.supabase.co
- **機能**:
  - Google OAuth 認証
  - PostgreSQL データベース
  - ユーザー管理
- **プラン**: 無料プラン
- **特徴**:
  - リアルタイムデータベース
  - REST API 自動生成
  - Row Level Security

### 3. Google Cloud Platform（認証）

**役割**: OAuth 認証プロバイダー

- **サービス**: Google OAuth 2.0
- **機能**: Googleアカウントでのログイン
- **設定**: OAuth 2.0 クライアント ID
- **無料枠**: 十分な無料枠あり

### 4. GitHub（コード管理）

**役割**: ソースコードのバージョン管理

- **URL**: https://github.com/AMO737/ai-schedule-app
- **機能**: Gitリポジトリ
- **特徴**: 
  - プライベートリポジトリ
  - Vercel と連携

## 📊 アーキテクチャ図

```
ユーザー
  ↓
Vercel（フロントエンド）
  ↓
Google OAuth（認証）
  ↓
Supabase（認証 + データベース）
  ↓
PostgreSQL（データ保存）
```

## 💰 コスト

### 現在（すべて無料）

- **Vercel**: 無料（Hobby）
- **Supabase**: 無料プラン
- **Google Cloud**: 無料枠
- **GitHub**: 無料（プライベートリポジトリ）
- **合計**: 0円/月

### 将来的な拡張が必要な場合

- **Vercel Pro**: $20/月（デプロイ制限なし）
- **Supabase Pro**: $25/月（より多くのリソース）
- **合計**: $45/月

## 🎯 各サービスの役割

### Vercel

**何をするか**:
- Next.js アプリケーションを実行
- 静的ファイルを配信
- サーバーレス関数を実行
- 自動デプロイ

**なぜ選んだか**:
- Next.js に最適化
- デプロイが簡単
- 無料プランが充実
- CDN が自動

### Supabase

**何をするか**:
- Google OAuth でログイン処理
- ユーザー情報を保存
- アプリデータを保存
- API を提供

**なぜ選んだか**:
- Firebase の代替（オープンソース）
- PostgreSQL を使用
- 無料プランが充実
- リアルタイム機能

### Google Cloud

**何をするか**:
- Google アカウントでの認証
- OAuth 2.0 フロー

**なぜ選んだか**:
- 一般的な認証方法
- 簡単に実装できる
- 無料枠が十分

## 🔄 データフロー

### ログインフロー

```
1. ユーザーが「Googleでログイン」をクリック
   ↓
2. Vercel（アプリ）がリクエスト送信
   ↓
3. Google のログインページが表示
   ↓
4. ユーザーがGoogleアカウントでログイン
   ↓
5. Supabase が認証を処理
   ↓
6. アプリに戻る
```

### データ保存フロー

```
1. ユーザーがデータを入力
   ↓
2. アプリがIndexedDB（ブラウザ）に保存
   ↓
3. Cookie にもバックアップ
   ↓
4. Supabase に送信（将来実装）
```

## 📝 まとめ

### 使用しているサーバー

1. **Vercel**: アプリのホスティング（フロントエンド）
2. **Supabase**: バックエンド + データベース
3. **Google Cloud**: 認証
4. **GitHub**: コード管理

### 全て無料

- 現在の構成はすべて無料プランで運用可能
- 将来の拡張時も低コストで開始可能

### 特徴

- **サーバーレス**: サーバー管理不要
- **自動スケール**: アクセス増加に対応
- **高可用性**: 複数のデータセンターで運用
- **セキュア**: HTTPS と OAuth で保護
